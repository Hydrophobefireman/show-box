(async()=>{const e=(e,t)=>{if(window.location.hostname.includes("localhost")||window.location.host.includes("192.168")||!window.location.hostname.includes("herokuapp"))return void(e.style.backgroundColor="#e3e3e3");const n=window.URL||window.webkitURL,o=new Request(t);e.onload=(({target:e})=>{n.revokeObjectURL(e.src)}),fetch(o).then(e=>e.blob()).then(e=>n.createObjectURL(e)).then(t=>{e.src=t,e.style.backgroundColor=""})},t=await fetch("/i/rec/"),n=(await t.json()).recommendations;if(0!==n.length){document.getElementById("recommend").style.display="flex",document.getElementById("rec-text").style.display="block";for(const t of n){const n=t.movie,o=t.id,c=document.createElement("span");thumb=t.thumb;const a=document.createElement("div"),d=document.createElement("span"),i=new Image;d.appendChild(i),a.appendChild(d),e(i,thumb),a.className="img-box",i.className="display-img",c.className="text-box",c.innerText=n,a.appendChild(c),document.getElementById("r-content").appendChild(a),d.onclick=(e=>{Beacon.send("/collect/",{type:"recommend",main:{ua:navigator.userAgent,touch:navigator.maxTouchPoints>0,data:[{movie:n,id:o}]}}),window.location=encodeURI(`/movie/${o}/${n.replace(/[^\w]/g,"-")}`)})}}})();