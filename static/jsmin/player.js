const hash_episode=()=>{if(hash_ep=window.location.hash.substr(1),hash_ep.length>0&&(reqs=parseqs(hash_ep),!isNaN(reqs.ep)))return console.log(reqs),void get_url_for(reqs.ep,window.t_id);get_url_for(1,window.t_id)};function urlencode(e,t){return(t?"?":"")+Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}window.addEventListener("hashchange",()=>{if(void 0!==window.t_id)try{hash_episode()}catch(e){console.log(e)}});const parseqs=e=>{var t={};e="?"==e[0]?e.substring(1):e;for(var n=(e=decodeURI(e)).split("&"),o=0;o<n.length;o++){var d=n[o].split("=");t[d[0]]=decodeURIComponent(d[1])}return t},extractHostname=e=>{try{var t;return e.indexOf("://")>-1?t=new URL(e):(e="http://"+e,t=new URL(e)),t.hostname}catch(e){return"null"}};var movie_id=window.location.pathname.split("/")[2],keys="set-id";function start_player(e){console.log(e);var t=urlencode({id:movie_id,nonce:nonce},!1),n=new XMLHttpRequest;n.open("POST","/data-parser/plugins/player/",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&set_meta_data(n.response)},n.onerror=function(){var e=document.getElementById("player-frame");fetch("/error-configs/").then(e=>e.blob()).then(t=>{e.src=window.URL.createObjectURL(t)})},n.send(t)}function set_meta_data(e){e=JSON.parse(e);var t=parseInt(e.episode_meta);window.movie_title=e.movie_name,window.t_id=e.tempid;for(var n=0;n<t;n++){p=n+1;var o=document.createElement("button"),d=document.createElement("a");o.innerText="Episode "+p,o.setAttribute("data-eid",p),d.href="#ep="+p,d.onclick=(e=>{e.preventDefault()}),document.getElementById("ep_names").appendChild(d),d.appendChild(o),o.className="episode-lists",o.onclick=function(){get_url_for(this.getAttribute("data-eid"),window.t_id),window.location.hash="ep="+this.getAttribute("data-eid")}}try{return void hash_episode()}catch(e){console.log(e)}get_url_for(1,window.t_id)}var html_data='<div style="margin-left:auto;margin-right:auto;text-align:center">Loading The Video</div>',__notif__=new Blob([html_data],{type:"text/html"}),blobbed_notif=window.URL.createObjectURL(__notif__);function get_url_for(e,t){var n=document.getElementById("player-frame");n.src=blobbed_notif;var o=new Request("/build-player/ep/",{method:"POST",body:body=urlencode({eid:e,nonce:t,mid:movie_id},!1),headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include"});fetch(o).then(e=>e.text()).then(t=>{build_player(t,"dummy-key-authorised",e),document.getElementById("curr-ep-id").innerHTML="Now Playing-Episode "+e,document.getElementById("download-episode-name").innerHTML=e}).catch(e=>{console.error(e),fetch("/error-configs/").then(e=>e.blob()).then(e=>{n.src=window.URL.createObjectURL(e)})})}function build_player(e,t,n){document.getElementById("custom-dl-box").style.display="block";var o=(e=JSON.parse(e)).url,d=e.alt1,i=e.alt2,r=document.getElementById("source1"),a=document.getElementById("source2"),l=document.getElementById("source3"),c=document.getElementById("dl-s1"),s=document.getElementById("dl-s2"),m=document.getElementById("dl-s3"),u=document.getElementById("link-s1"),p=document.getElementById("link-s2"),y=document.getElementById("link-s3");function h(e,t,n,o,d){if(null!==e){if(n.indexOf("://")>-1?n=n.replace("http://","https://"):0==n.indexOf("//")&&(n="https:"+n),e.setAttribute("data",n),e.innerHTML=extractHostname(n),"null"==extractHostname(n)||"none"==extractHostname(n).toLowerCase())return e.style.display="none",t.style.display="none",void(o.style.display="none");e.style.display="inline",e.setAttribute("data",n.toString().replace("http://","https://")),t.style.display=e.style.display,t.innerHTML=e.innerHTML,o.href="/out"+urlencode({url:n,title:window.movie_title+" episode:"+d},!0),t.innerHTML=e.innerHTML,e.onclick=function(){var e=document.getElementById("player-frame");document.getElementById("ifr-bx").removeChild(e),console.log(this.getAttribute("data")),Beacon.send("/collect/",{type:"moviewatch",main:{data:[{movie:document.querySelector('meta[name="movie"]').content,url:target.getAttribute("data")}],ua:navigator.userAgent,touch:navigator.maxTouchPoints>0}}),e.src=this.getAttribute("data"),document.getElementById("ifr-bx").appendChild(e)}}}h(r,c,o,u,n),h(a,s,d,p,n),h(l,m,i,y,n),document.getElementById("player-frame").src=o}document.getElementById("downloader-info").onclick=(()=>{document.getElementById("hdn-info").style.display="block",document.getElementById("downloader-info").style.display="none"}),document.getElementById("d-linker").href=encodeURI("/report?id="+movie_id),document.getElementById("custom-dl").onclick=(()=>{document.getElementById("buttons-row").style.display="block"});