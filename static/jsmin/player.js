const parseqs=e=>{var t={};e="?"==e[0]?e.substring(1):e;for(var n=(e=decodeURI(e)).split("&"),o=0;o<n.length;o++){var d=n[o].split("=");t[d[0]]=decodeURIComponent(d[1])}return t},extractHostname=e=>{try{var t;return e.indexOf("://")>-1?t=new URL(e):(e="http://"+e,t=new URL(e)),t.hostname}catch(e){return"null"}};var movie_id=window.location.pathname.split("/")[2],keys="set-id";function start_player(key){console.log(key);var params=eval('encodeURI("id=" + movie_id + "&nonce=" + nonce)'),xhr=new XMLHttpRequest;xhr.open("POST","/data-parser/plugins/player/",!0),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.onreadystatechange=function(){4==xhr.readyState&&200==xhr.status&&set_meta_data(xhr.response)},xhr.onerror=function(){var e=document.getElementById("player-frame");fetch("/error-configs/").then(e=>e.blob()).then(t=>{e.src=window.URL.createObjectURL(t)})},xhr.send(params)}function set_meta_data(e){e=JSON.parse(e);for(var t=parseInt(e.episode_meta),n=e.tempid,o=0;o<t;o++){p=o+1;var d=document.createElement("button");d.innerText="Episode "+p,d.setAttribute("data-eid",p),document.getElementById("ep_names").appendChild(d),d.className="episode-lists",d.onclick=function(){get_url_for(this.getAttribute("data-eid"),n)}}try{if(hash_ep=window.location.hash.substr(1),hash_ep.length>0&&(reqs=parseqs(hash_ep),!isNaN(reqs.ep)))return console.log(reqs),void get_url_for(reqs.ep,n);get_url_for("1",n)}catch(e){console.log(e)}}var html_data='<div style="margin-left:auto;margin-right:auto;text-align:center">Loading The Video</div>',__notif__=new Blob([html_data],{type:"text/html"}),blobbed_notif=window.URL.createObjectURL(__notif__);function get_url_for(e,t){var n=document.getElementById("player-frame");n.src=blobbed_notif;var o=new Request("/build-player/ep/",{method:"POST",body:"eid="+encodeURIComponent(e)+"&nonce="+encodeURIComponent(t)+"&mid="+encodeURIComponent(movie_id),headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include"});fetch(o).then(e=>e.text()).then(t=>{build_player(t,"dummy-key-authorised"),document.getElementById("curr-ep-id").innerHTML="Now Playing-Episode "+e,document.getElementById("download-episode-name").innerHTML=e}).catch(e=>{console.error(e),fetch("/error-configs/").then(e=>e.blob()).then(e=>{n.src=window.URL.createObjectURL(e)})})}function build_player(e,t){document.getElementById("custom-dl-box").style.display="block";var n=(e=JSON.parse(e)).url,o=e.alt1,d=e.alt2,r=document.getElementById("source1"),a=document.getElementById("source2"),l=document.getElementById("source3"),i=document.getElementById("dl-s1"),c=document.getElementById("dl-s2"),s=document.getElementById("dl-s3"),m=document.getElementById("link-s1"),u=document.getElementById("link-s2"),p=document.getElementById("link-s3");function y(e,t,n,o){n.indexOf("://")>-1?n=n.replace("http://","https://"):0==n.indexOf("//")&&(n="https:"+n),e.setAttribute("data",n),e.innerHTML=extractHostname(n),"null"==extractHostname(n)||"none"==extractHostname(n).toLowerCase()?e.style.display="none":(e.style.display="inline",e.setAttribute("data",n.toString().replace("http://","https://"))),t.style.display=e.style.display,t.innerHTML=e.innerHTML,o.href="/out?url="+encodeURIComponent(n),t.innerHTML=e.innerHTML,e.onclick=function(){var e=document.getElementById("player-frame");document.getElementById("ifr-bx").removeChild(e),e.src=this.getAttribute("data"),document.getElementById("ifr-bx").appendChild(e)}}y(r,i,n,m),y(a,c,o,u),y(l,s,d,p),document.getElementById("player-frame").src=n}document.getElementById("downloader-info").onclick=(()=>{document.getElementById("hdn-info").style.display="block",document.getElementById("downloader-info").style.display="none"}),document.getElementById("d-linker").onclick=(()=>{window.location=encodeURI("/report?id="+movie_id)}),document.getElementById("custom-dl").onclick=(()=>{document.getElementById("buttons-row").style.display="block"});