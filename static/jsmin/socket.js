String.prototype.trunc=function(e){return this.length>e?`${this.substr(0,e-1)}...`:this};const dynamic_inp=document.getElementById("dynamic_inp"),inp_res=document.getElementById("inp-results");function make_req(e,t){const n=e.value;check_inp(n)&&t.send(n)}function check_inp(e){return 0!==e.replace(/([^\w]|_)/g,"").length}(()=>{if(!window.WebSocket)return;const e=`${"https:"===window.location.protocol?"wss://":"ws://"}${window.location.host}/suggestqueries`,t=new WebSocket(e);dynamic_inp.oninput=function(){inp_res.innerHTML="",make_req(this,t)},t.onopen=(e=>{console.log(e)}),t.onmessage=(e=>{inp_res.innerHTML="",_msg=e.data,inp_res.style.display="block";try{var t=JSON.parse(_msg);if(t["no-res"])return}catch(e){return void console.log(e)}const n=t.data;console.log(`Response Cached:${t.Cached}`);for(let e=0;e<n.length;e++){const t=n[e],o=document.createElement("div"),i=document.createElement("span");o.setAttribute("data-im",t.id),o.onclick=function(){Beacon.send("/collect/",{type:"movieclick",main:{data:[{movie:t.movie,query:window.___currentWsMsg__}],ua:navigator.userAgent,touch:navigator.maxTouchPoints>0}}),window.location=`/movie/${this.getAttribute("data-im")}/watch/`},o.style.cursor="pointer",o.style.userSelect="none",o.style.listStyle="none",o.style.width="45%",o.style.fontSize="small",o.className="sock-res",o.appendChild(i),o.style.margin="auto",i.innerHTML=t.movie,inp_res.appendChild(o),o.style.textAlign="left",o.style.border="2px solid #e3e3e3",o.style.borderRadius="5px"}})})(),window.onclick=(e=>{"input_n"!==e.target.className&&"sock-res"!==e.target.className&&e.target!=inp_res&&(inp_res.innerHTML="")});